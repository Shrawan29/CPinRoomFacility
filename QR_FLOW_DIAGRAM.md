# Guest QR Code Authentication - Complete Flow Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HOTEL ROOM SETUP                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  QR CODE (Printed & Placed in Room)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ URL: https://hotel.com/guest/login?               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚      token=QRTOKEN&room=101                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ Contains:                                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Guest Portal URL                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Room Number                                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Unique Authentication Token                     â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Guest can scan with:                                           â”‚
â”‚  â€¢ Google Lens (built-in on phones)                            â”‚
â”‚  â€¢ QR Code scanner app                                         â”‚
â”‚  â€¢ Camera app (modern phones)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Complete Guest Access Flow

```
                        START
                         â”‚
                         â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Guest in Room   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â†“               â†“               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Option â”‚      â”‚ Option â”‚      â”‚ Option 3 â”‚
    â”‚   1    â”‚      â”‚   2    â”‚      â”‚  Staff   â”‚
    â”‚        â”‚      â”‚        â”‚      â”‚Provided  â”‚
    â””â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚  Token   â”‚
      â”‚              â”‚              â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“              â†“                 â†“
  QR Scanner    Google Lens       Manual Entry
      â”‚              â”‚                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Scan QR Code        â”‚
            â”‚ (Any Method)        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ URL Parameters Extracted:           â”‚
    â”‚ â€¢ token = QRTOKEN                   â”‚
    â”‚ â€¢ room = 101                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   GuestLogin Page Loads             â”‚
    â”‚   (URL params pre-fill form)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   STEP 1: Enter Phone Number        â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚ Phone: +91 XXXXX XXXXX     â”‚   â”‚
    â”‚   â”‚ [Send OTP Button]          â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“ (Click Send OTP)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Backend Validation:               â”‚
    â”‚   â€¢ Check QR token valid            â”‚
    â”‚   â€¢ Check phone matches booking     â”‚
    â”‚   â€¢ Check active stay exists        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
    âœ“ VALID                    âœ— INVALID
        â”‚                           â”‚
        â†“                           â†“
    Send OTP            Error: Invalid Token
        â”‚               or Phone Mismatch
        â”‚
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   STEP 2: Enter OTP                 â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚ OTP:   [ ][ ][ ][ ][ ][ ]  â”‚   â”‚
    â”‚   â”‚ [Verify & Login Button]    â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                     â”‚
    â”‚   (OTP sent to phone)               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“ (Click Verify)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Backend Verification:             â”‚
    â”‚   â€¢ Verify OTP code                 â”‚
    â”‚   â€¢ Create guest session            â”‚
    â”‚   â€¢ Mark QR token as used           â”‚
    â”‚   â€¢ Generate JWT token              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
    âœ“ VALID OTP              âœ— INVALID OTP
        â”‚                           â”‚
        â”‚                       Error: Wrong OTP
        â”‚                       Try Again
        â”‚
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Login Successful                  â”‚
    â”‚   â€¢ Save JWT token to localStorage  â”‚
    â”‚   â€¢ Save guest data to context      â”‚
    â”‚   â€¢ Redirect to dashboard           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   GuestDashboard Page               â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚ Welcome! Room #101          â”‚   â”‚
    â”‚   â”‚ Phone: +91 XXXXX XXXXX     â”‚   â”‚
    â”‚   â”‚                             â”‚   â”‚
    â”‚   â”‚ [ğŸ½ï¸ Browse Menu]           â”‚   â”‚
    â”‚   â”‚ [ğŸ“¦ My Orders]             â”‚   â”‚
    â”‚   â”‚ [Logout]                   â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚
        â†“                            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Browse Menu â”‚        â”‚   My Orders      â”‚
    â”‚             â”‚        â”‚                  â”‚
    â”‚ â€¢ Search    â”‚        â”‚ â€¢ View orders    â”‚
    â”‚ â€¢ Filter    â”‚        â”‚ â€¢ Track status   â”‚
    â”‚ â€¢ Add cart  â”‚        â”‚ â€¢ Reorder        â”‚
    â”‚ â€¢ Order     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â†“
    ORDER PLACED
```

## URL Parameter Flow

```
QR Code contains URL:
https://hotel.com/guest/login?token=room_101_1705832400000&room=101

                            â†“

URL Parameters:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ token: room_101_1705832400000    â”‚
â”‚ room:  101                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â†“

GuestLogin Component:
useEffect(() => {
  const token = searchParams.get("token");      // â† Extracted
  const room = searchParams.get("room");        // â† Extracted
  
  setFormData({ qrToken: token, ... });
  setRoomNumber(room);
  setStep("phone");                             // â† Start at phone
})

                            â†“

Form Pre-populated:
Room: 101 (displayed)
QR Token: room_101_1705832400000 (stored)
User enters: Phone number
```

## Backend QR Token Validation

```
User scans QR â†’ URL loads with token
                    â†“
            Token sent to backend
                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Backend: sendGuestOTP()     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ 1. Check QRToken exists      â”‚
    â”‚    QRToken.findOne({         â”‚
    â”‚      token: "...",           â”‚
    â”‚      used: false             â”‚
    â”‚    })                        â”‚
    â”‚                              â”‚
    â”‚ 2. Verify phone matches      â”‚
    â”‚    ActiveStay.findOne({      â”‚
    â”‚      roomNumber: 101,        â”‚
    â”‚      phone: "+91...",        â”‚
    â”‚      status: "ACTIVE"        â”‚
    â”‚    })                        â”‚
    â”‚                              â”‚
    â”‚ 3. Send OTP to phone         â”‚
    â”‚                              â”‚
    â”‚ âœ“ Success â†’ Send OTP         â”‚
    â”‚ âœ— Fail â†’ Return error        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Models Used

```
QRToken Model:
{
  _id: ObjectId,
  token: "room_101_1705832400000",
  roomNumber: 101,
  createdAt: Date,
  expiresAt: Date,
  used: false
}

ActiveStay Model:
{
  _id: ObjectId,
  roomNumber: 101,
  phone: "+91XXXXXXXXXX",
  guestName: "John Doe",
  checkInDate: Date,
  checkOutDate: Date,
  status: "ACTIVE"
}

GuestSession Model:
{
  _id: ObjectId,
  phone: "+91XXXXXXXXXX",
  roomNumber: 101,
  token: "jwt_token_here",
  deviceId: "device_...",
  createdAt: Date,
  expiresAt: Date
}
```

## Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SECURITY VALIDATION LAYERS           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  1ï¸âƒ£  QR TOKEN VALIDATION                   â”‚
â”‚     â””â”€ Check token exists in DB             â”‚
â”‚     â””â”€ Check token not already used        â”‚
â”‚     â””â”€ Check token not expired             â”‚
â”‚                                             â”‚
â”‚  2ï¸âƒ£  PHONE NUMBER VERIFICATION             â”‚
â”‚     â””â”€ Match with active stay              â”‚
â”‚     â””â”€ Ensure room is occupied             â”‚
â”‚     â””â”€ Verify check-in valid               â”‚
â”‚                                             â”‚
â”‚  3ï¸âƒ£  OTP VERIFICATION                      â”‚
â”‚     â””â”€ Generate random 6-digit OTP         â”‚
â”‚     â””â”€ Send via SMS (not hardcoded)        â”‚
â”‚     â””â”€ Verify entered OTP matches          â”‚
â”‚     â””â”€ Check OTP not expired (5 min)       â”‚
â”‚                                             â”‚
â”‚  4ï¸âƒ£  JWT TOKEN GENERATION                  â”‚
â”‚     â””â”€ Create secure JWT token             â”‚
â”‚     â””â”€ Include room & phone info           â”‚
â”‚     â””â”€ Set expiration (24 hours)           â”‚
â”‚                                             â”‚
â”‚  5ï¸âƒ£  SESSION MANAGEMENT                    â”‚
â”‚     â””â”€ Store session in DB                 â”‚
â”‚     â””â”€ Track device ID                     â”‚
â”‚     â””â”€ Log access                          â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Alternative Access Methods

```
Method 1: QR Code Scanner
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Any QR App   â”‚ â†’ Scan â†’ URL Opens â†’ Login
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Method 2: Google Lens
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Google Lens  â”‚ â†’ Scan â†’ Redirect â†’ Login
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Method 3: Camera (Modern Phones)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phone Camera â”‚ â†’ Scan â†’ Suggest â†’ Login
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Method 4: Manual Entry (Fallback)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest Access Fallback    â”‚ â†’ Enter room â†’ Enter token â†’ Login
â”‚ (/guest/access-fallback) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ guest/
â”‚   â”‚   â”‚   â”œâ”€â”€ GuestLogin.jsx           â† Main login (handles URL params)
â”‚   â”‚   â”‚   â”œâ”€â”€ GuestDashboard.jsx       â† Dashboard after login
â”‚   â”‚   â”‚   â””â”€â”€ GuestAccessFallback.jsx  â† Fallback for manual entry
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â””â”€â”€ QRCodeManager.jsx        â† Generate QR codes
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ guest/
â”‚   â”‚   â”‚   â”œâ”€â”€ MenuBrowse.jsx           â† Menu & ordering
â”‚   â”‚   â”‚   â””â”€â”€ QRCodeGenerator.jsx      â† QR code generation
â”‚   â”‚   â””â”€â”€ GuestProtectedRoute.jsx      â† Route protection
â”‚   â”‚
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ GuestAuthContext.jsx         â† Auth state
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ guest.service.js             â† API calls
â”‚
â””â”€â”€ package.json (qrcode package added)

Backend/
â””â”€â”€ src/
    â”œâ”€â”€ models/
    â”‚   â”œâ”€â”€ QRToken.js
    â”‚   â”œâ”€â”€ ActiveStay.js
    â”‚   â””â”€â”€ GuestSession.js
    â”‚
    â”œâ”€â”€ controllers/
    â”‚   â””â”€â”€ guestAuth.controller.js      â† OTP flow
    â”‚
    â””â”€â”€ routes/
        â””â”€â”€ guestAuth.routes.js          â† Guest routes
```

---

**Key Points:**
- âœ… Guests scan QR codes placed in rooms
- âœ… URL contains room number & token
- âœ… Page auto-populates token from URL
- âœ… Guest authenticates with phone + OTP
- âœ… Each room has unique QR code
- âœ… Fallback for guests without QR scanner
- âœ… All traffic encrypted over HTTPS
- âœ… Sessions auto-expire after 24 hours
